{% extends 'base.html' %}

{% block content %}
{% load staticfiles %}
<!-- Django Dynamic Formsets -->
<script src="{% static 'js/jquery.formset.js' %}"></script>

<div class="row">
    <div class="col-lg-12">
        <h1 class="page-header">Table {{ table_num }} Order</h1>
    </div>
    <!-- /.col-lg-12 -->
</div>

    <div class="row">
        <div class="col-lg-4">
            <h4>{{ menu.name }}</h4>
            {% for item in menu.item.all %}
                <br>
                <a href="{% url 'menu_item_detail' item.pk %}">
                    <img class="img-circle" src="{{ item.photo.url }}" alt="image" height='20px' />
                    {{ item.name }}, {{ item.price }}
                </a>
            {% endfor %}

        </div>
        <form id="create_order_form" role="form" method="post">
            {% csrf_token %}

        {{ formset.management_form }}
        {{ formset.non_field_errors }}
        {% for form in formset %}
            <div class="col-lg-4" id="order_input">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <b>Seat</b>
                    </div>
                    <div class="panel-body">
                        <div class="fieldWrapper">
                            <tr>
                                <td>
                                    {{ form.items.label_tag }}
                                    {{ form.items }}
                                    {{ form.seat_number.label_tag }}
                                    {{ form.seat_number }}

                                    {% if form.items.help_text %}
                                        <p class="help">{{ form.items.help_text|safe }}</p>
                                    {% endif %}
                                </td>
                            </tr>
                        </div>
                        <div class="panel-footer">
                        </div>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
<br><br>
<input type="submit" name="name" value="Send Order">
</form>

<script type="text/javascript">
    $('#create_order_form #order_input').formset();
</script>
<br><br>
{% endblock %}
